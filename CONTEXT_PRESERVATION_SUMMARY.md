# Context Preservation - What Won't Be Forgotten

**Date:** 2026-02-16
**Purpose:** Summary of knowledge preservation for future Claude Code sessions

---

## ‚úÖ What's Preserved (Won't Forget)

### 1. Auto Memory System

**Location:** `~/.claude/projects/-Users-jplfaria-repos-genome-heatmap-viewer/memory/`

These files are **automatically loaded** in every session:

#### `MEMORY.md` (Main Project Memory)
- Project status: KBase integration phase
- Viewer architecture (vanilla JS, Canvas API)
- Data schema (38 fields per gene)
- Critical issues (multi-cluster genes, consistency scores)
- Stakeholders (Chris Henry, Jose, Adam, Boris)
- Phase completion tracking

#### `kbase-sdk.md` (KB SDK Quick Reference) ‚≠ê NEW
- **Auto-generated vs manual files** (critical - don't edit Server.py!)
- **Development workflow** (edit spec ‚Üí make ‚Üí implement ‚Üí test ‚Üí deploy)
- **KIDL template** (copy-paste ready)
- **HTML report pattern** (our exact use case)
- **UI spec.json pattern**
- **Integration plan** (5 steps to add heatmap to Dashboard)
- **TableScanner API** code snippet
- **Repo locations** (~/repos/KBDatalakeDashboard, KBDatalakeApps)

### 2. KB SDK Context Files

**Location:** `.claude/kbase-context/`

Reference docs from Chris Henry's ClaudeCommands:

- `kidl-reference.md` - KIDL syntax, types, best practices
- `ui-spec-reference.md` - Parameter types, widgets, validation
- `kbutillib-integration.md` - Utility library patterns
- `workspace-datatypes.md` - KBase type system

These provide detailed reference without cluttering memory.

### 3. Comprehensive Guides

**Location:** Project root

Full documentation (won't auto-load, but persistent):

- `KBASE_SDK_DEVELOPMENT_GUIDE.md` - 24KB complete reference
- `KBASE_DASHBOARD_ANALYSIS.md` - Dashboard architecture deep dive
- `KBASE_APPS_ANALYSIS.md` - Data pipeline analysis
- Plus all other project docs

---

## üéØ Key Knowledge Preserved

### KB SDK Development (Critical!)

**Files to NEVER edit:**
- ‚ùå `lib/MyModule/MyModuleServer.py` (regenerated by `make`)

**Files to ALWAYS edit:**
- ‚úÖ `MyModule.spec` (KIDL)
- ‚úÖ `lib/MyModule/MyModuleImpl.py` (Python)
- ‚úÖ `ui/narrative/methods/*/spec.json` (UI params)
- ‚úÖ `ui/narrative/methods/*/display.yaml` (UI docs)

**Workflow:**
```bash
vim MyModule.spec  # Edit interface
make               # Regenerate server code
vim Impl.py        # Implement method
kb-sdk test        # Test
git push           # Auto-deploy to appdev
```

### Integration Strategy

**Extend KBDatalakeDashboard** (not create new module):
1. Add `data/heatmap/` with heatmap HTML
2. Modify `KBDatalakeDashboardImpl.py` to copy heatmap dir
3. Add 2nd `html_link` for heatmap tab
4. Heatmap reads `../app-config.json` for UPA
5. Fetch genes from TableScanner API

**Why?** Reuse existing infrastructure (GenomeDataLakeTables input, Shock upload, auth)

### TableScanner API Pattern

```javascript
const token = getCookie('kbase_session');
fetch('https://appdev.kbase.us/services/berdl_table_scanner/table-data', {
    method: 'POST',
    headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        upa: config.upa,
        table: 'genome_features',
        limit: 10000
    })
})
```

### Repository Locations

- `~/repos/KBDatalakeDashboard` - **What we'll modify** (viewer)
- `~/repos/KBDatalakeApps` - Reference only (data generation)
- `~/repos/genome-heatmap-viewer` - Standalone viewer (complete)

---

## üìù How to Use This in Future Sessions

### Starting a New Session

1. **Memory auto-loads** - No action needed
2. **Reference kbase-sdk.md** for quick patterns
3. **Reference context files** for detailed KB SDK info
4. **Reference comprehensive guides** for deep dives

### If I Seem to Forget

Ask me to read:
```
Read ~/.claude/projects/-Users-jplfaria-repos-genome-heatmap-viewer/memory/kbase-sdk.md
```

Or point me to specific docs:
```
Check KBASE_SDK_DEVELOPMENT_GUIDE.md for full KB SDK workflow
```

### Updating Memory

If new critical knowledge emerges:
```
Add this to memory/kbase-sdk.md: [knowledge here]
```

I'll update the memory file for future sessions.

---

## üöÄ Ready for KBase Integration

With this preservation system:

‚úÖ **Won't forget** KB SDK workflow
‚úÖ **Won't forget** auto-generated vs manual files
‚úÖ **Won't forget** integration strategy
‚úÖ **Won't forget** repository locations
‚úÖ **Won't forget** critical patterns and templates

**Next session:** Just continue from where we left off - all context preserved!

---

## Files Created

1. `memory/kbase-sdk.md` - KB SDK quick reference (auto-loads)
2. `.claude/kbase-context/*.md` - 4 reference files from ClaudeCommands
3. `.claude/README.md` - Explanation of memory system
4. This file - Summary of what's preserved

**Total:** 7 new files ensuring knowledge persistence across context compaction.

